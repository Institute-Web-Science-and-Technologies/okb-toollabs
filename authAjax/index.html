<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script>
$(document).ready(function(){
 
   var loginToken;
    $("#button1").click(function(){
        $.post("https://en.wikipedia.org/w/api.php?action=query&meta=tokens",
        {
			type: "login",
			format: "json"
        },
        function(data,status){
			loginToken = data.query.tokens.logintoken;
            alert("Data: " + loginToken + "\nStatus: " + status);          
        });
    });
    
	
     $("#button2").click(function(){
	 
	
        $.ajax({
	
		url: "https://en.wikipedia.org/w/api.php",
		  type: "POST",
		 		   crossDomain: true,
		  xhrFields: {
		  withCredentials: true
	   },
		  
		  dataType: "json",
          action: "clientlogin",
          loginreturnurl: "http://example.com/",
		  username: "userId",
		  passowrd: "password",
		  rememberMe: "1",
		  logintoken: loginToken,

        },
        function(data,status){
            alert("Data: " + data + "\nStatus: " + status);
        });
    });
});
</script>
</head>
<body>

<button id='button1'>Get token</button>
<button id='button2'>login</button>
</body>
</html>
